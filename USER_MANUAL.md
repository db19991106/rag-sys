# RAG 系统用户手册

本文档提供了 RAG (Retrieval-Augmented Generation) 系统的详细使用指南。

## 1. 系统概述

RAG 系统是一个基于检索增强生成的智能问答系统，能够：
- 处理多种格式的文档
- 智能检索相关信息
- 生成准确的回答
- 支持多轮对话
- 提供完整的管理功能

## 2. 登录与权限

### 2.1 登录系统

1. 访问系统 URL
2. 输入用户名和密码
3. 点击「登录」按钮

### 2.2 默认账号

| 角色 | 用户名 | 密码 | 权限说明 |
|------|--------|------|----------|
| 管理员 | admin | 123456 | 全部权限 |
| 编辑者 | editor | 123456 | 文档管理、检索管理 |
| 查看者 | viewer | 123456 | 文档查看、问答功能 |

### 2.3 权限说明

| 权限 | 描述 | 适用角色 |
|------|------|----------|
| manage_users | 用户管理 | 管理员 |
| manage_documents | 文档管理 | 管理员、编辑者 |
| manage_settings | 系统设置 | 管理员 |
| view_audit_logs | 审计日志查看 | 管理员 |
| manage_vector_db | 向量数据库管理 | 管理员、编辑者 |
| run_evaluations | 系统评估 | 管理员、编辑者 |
| view_documents | 文档查看 | 所有角色 |
| run_retrieval | 检索功能 | 所有角色 |
| run_generation | 生成功能 | 所有角色 |

## 3. 功能模块

### 3.1 文档管理

#### 3.1.1 上传文档

1. 进入「文档管理」页面
2. 点击「上传文档」按钮
3. 选择本地文件（支持多种格式）
4. 等待上传和处理完成
5. 查看处理结果

#### 3.1.2 文档列表

- **状态**：显示文档处理状态
- **操作**：支持查看、编辑、删除操作
- **筛选**：按状态、类型筛选文档
- **搜索**：搜索文档名称

#### 3.1.3 文档详情

- 查看文档基本信息
- 查看文档内容
- 查看版本历史
- 进行版本回滚

### 3.2 智能问答

#### 3.2.1 基本问答

1. 进入「智能问答」页面
2. 在输入框中输入问题
3. 点击「发送」按钮
4. 等待系统生成回答
5. 查看回答结果和相关文档

#### 3.2.2 多轮对话

- 系统会自动保存对话历史
- 可以在同一对话中进行多轮交互
- 支持上下文理解
- 可以创建新对话

#### 3.2.3 高级选项

- **检索配置**：调整 top_k、相似度阈值等
- **生成配置**：调整温度、最大 tokens 等
- **模型选择**：选择不同的 LLM 模型

### 3.3 系统评估

#### 3.3.1 评估配置

- 选择评估类型：检索评估、生成评估、端到端评估
- 设置评估参数
- 选择评估数据集

#### 3.3.2 评估结果

- 查看详细评估指标
- 查看可视化图表
- 分析评估结果
- 生成评估报告

### 3.4 系统设置

#### 3.4.1 基本设置

- 系统名称、版本
- 运行模式
- 端口配置

#### 3.4.2 模型设置

- 嵌入模型配置
- LLM 模型配置
- 向量数据库配置

#### 3.4.3 安全设置

- JWT 配置
- 权限管理
- 审计日志设置

## 4. 使用指南

### 4.1 最佳实践

#### 4.1.1 文档管理

- **文档格式**：优先使用结构化文档（如 PDF、DOCX）
- **文档大小**：单文档建议不超过 10MB
- **文档内容**：确保文档内容清晰、结构化
- **版本管理**：定期更新重要文档，保留版本历史

#### 4.1.2 问答技巧

- **问题表述**：清晰、具体的问题获得更准确的回答
- **上下文提供**：对于复杂问题，提供必要的背景信息
- **多轮交互**：对于复杂任务，使用多轮对话逐步解决
- **结果验证**：重要信息请验证来源文档

#### 4.1.3 系统维护

- **定期备份**：定期备份向量数据库和文档
- **模型更新**：根据需要更新嵌入模型和 LLM 模型
- **性能监控**：关注系统性能指标
- **安全检查**：定期检查系统安全状态

### 4.2 常见场景

#### 4.2.1 知识查询

**场景**：查询特定领域的知识

**操作步骤**：
1. 上传相关领域文档
2. 在智能问答页面输入具体问题
3. 查看回答和相关文档
4. 如有需要，进行追问

**示例**：
- "什么是 RAG 技术？"
- "如何优化检索性能？"
- "向量数据库的工作原理是什么？"

#### 4.2.2 文档分析

**场景**：分析文档内容，提取关键信息

**操作步骤**：
1. 上传需要分析的文档
2. 输入分析请求
3. 查看系统生成的分析结果

**示例**：
- "总结这份文档的主要内容"
- "提取文档中的关键要点"
- "分析文档中的数据趋势"

#### 4.2.3 问题解决

**场景**：解决具体问题，提供解决方案

**操作步骤**：
1. 上传相关问题的背景文档
2. 详细描述问题
3. 请求系统提供解决方案
4. 评估解决方案的可行性

**示例**：
- "如何解决检索准确率低的问题？"
- "系统性能优化的方法有哪些？"
- "如何提高生成回答的质量？"

## 5. 技术支持

### 5.1 常见问题

**Q: 文档上传失败怎么办？**
A: 检查文件格式是否支持，文件大小是否超过限制，网络连接是否正常。

**Q: 回答质量不高怎么办？**
A: 尝试上传更相关的文档，调整检索参数，或使用更具体的问题表述。

**Q: 系统响应缓慢怎么办？**
A: 检查系统资源使用情况，考虑使用 GPU 加速，或调整批处理大小。

**Q: 如何提高检索准确率？**
A: 优化文档质量，使用更具体的查询词，启用重排序功能。

### 5.2 故障排查

#### 5.2.1 后端服务故障

- 检查服务状态：`systemctl status rag-backend`
- 查看日志：`tail -f backend/logs/app.log`
- 重启服务：`systemctl restart rag-backend`

#### 5.2.2 前端页面故障

- 清除浏览器缓存
- 检查网络连接
- 确认后端服务运行正常
- 检查浏览器控制台错误

#### 5.2.3 模型加载故障

- 检查模型文件是否存在
- 确认模型路径配置正确
- 检查内存是否充足
- 查看详细错误信息

### 5.3 联系支持

- **技术支持邮箱**：support@example.com
- **支持电话**：400-123-4567
- **工作时间**：周一至周五 9:00-18:00

## 6. 术语解释

### 6.1 核心概念

- **RAG**：检索增强生成，结合检索和生成的 AI 技术
- **向量数据库**：存储和检索向量嵌入的数据库
- **嵌入模型**：将文本转换为向量的模型
- **LLM**：大语言模型，如 GPT、Qwen 等
- **检索**：从文档中查找相关信息的过程
- **生成**：基于检索结果生成回答的过程

### 6.2 技术术语

- **top_k**：返回前 k 个最相关的结果
- **相似度**：衡量文本相关性的指标
- **温度**：控制生成多样性的参数
- **上下文**：提供给 LLM 的背景信息
- **重排序**：对检索结果重新排序以提高准确性
- **切分**：将长文档分割成短片段的过程

### 6.3 系统组件

- **前端**：用户界面，基于 React + TypeScript
- **后端**：API 服务，基于 FastAPI
- **向量数据库**：存储向量嵌入，支持多种类型
- **嵌入服务**：提供文本嵌入功能
- **生成服务**：提供文本生成功能
- **评估服务**：评估系统性能

## 7. 附录

### 7.1 支持的文档格式

| 格式 | 扩展名 | 支持程度 |
|------|--------|----------|
| 文本文件 | .txt | 完全支持 |
| PDF | .pdf | 完全支持 |
| Word | .docx | 完全支持 |
| Markdown | .md | 完全支持 |
| CSV | .csv | 完全支持 |
| JSON | .json | 完全支持 |
| HTML | .html | 完全支持 |
| XML | .xml | 完全支持 |
| PowerPoint | .pptx | 部分支持 |
| Excel | .xlsx | 部分支持 |

### 7.2 模型参数说明

#### 7.2.1 嵌入模型参数

- **batch_size**：批处理大小，影响处理速度
- **device**：运行设备，可选 cpu 或 cuda

#### 7.2.2 LLM 参数

- **temperature**：控制生成多样性，0-1 之间
- **max_tokens**：最大生成 tokens 数
- **top_p**：控制生成的词汇多样性

#### 7.2.3 检索参数

- **top_k**：返回结果数量
- **similarity_threshold**：相似度阈值
- **enable_rerank**：是否启用重排序

### 7.3 系统性能指标

| 指标 | 目标值 | 测量方法 |
|------|--------|----------|
| 文档上传速度 | <30秒/MB | 上传测试文件 |
| 问答响应时间 | <5秒 | 标准问题测试 |
| 检索准确率 | >85% | 标准数据集评估 |
| 生成质量 | >4.0/5.0 | 人工评估 |
| 系统稳定性 | 99.9% | 长期运行测试 |

### 7.4 快捷键

| 功能 | 快捷键 |
|------|--------|
| 发送问题 | Enter |
| 新对话 | Ctrl+N |
| 清除输入 | Ctrl+L |
| 上传文档 | Ctrl+U |
| 搜索文档 | Ctrl+F |

## 8. 更新日志

### 版本 1.0.0

- ✅ 初始版本发布
- ✅ 文档管理功能
- ✅ 智能问答功能
- ✅ 系统评估功能
- ✅ 多格式文档支持
- ✅ 本地 LLM 集成
- ✅ 向量数据库支持
- ✅ 用户权限管理
- ✅ 审计日志功能
- ✅ 错误处理与监控
- ✅ 性能优化
- ✅ 安全保护
- ✅ 详细文档

### 后续版本规划

- 📅 版本 1.1.0：增强多语言支持
- 📅 版本 1.2.0：添加更多模型集成
- 📅 版本 1.3.0：优化前端用户体验
- 📅 版本 2.0.0：支持分布式部署
