<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>向量表示与索引状态 - RAG Embedding 可视化</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
        }
        :root {
            --primary: #165DFF;
            --success: #00B42A;
            --processing: #FF7D00;
            --error: #F53F3F;
            --pending: #86909C;
            --bg-main: #F5F7FA;
            --bg-card: #FFFFFF;
            --bg-light: #F2F3F5;
            --border: #E5E6EB;
            --text-main: #1D2129;
            --text-secondary: #4E5969;
            --text-light: #86909C;
            --shadow: 0 2px 12px 0 rgba(0,0,0,0.08);
            --radius: 8px;
            --transition: all 0.3s ease;
            --active: rgba(22,93,255,0.1);
        }
        body {
            background-color: var(--bg-main);
            color: var(--text-main);
            min-height: 100vh;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        .page-header {
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        .page-title {
            font-size: 24px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .page-title small {
            font-size: 14px;
            color: var(--text-light);
            font-weight: 400;
        }
        .back-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
        }
        .card {
            background-color: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 24px;
        }
        .card-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        .card-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .card-body {
            padding: 24px;
        }
        /* 统计卡片 */
        .stat-card-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            padding: 20px;
            border-radius: var(--radius);
            background: linear-gradient(135deg, var(--primary) 0%, #4080FF 100%);
            color: #fff;
        }
        .stat-card-pending {
            background: linear-gradient(135deg, var(--pending) 0%, #A7B0B8 100%);
        }
        .stat-card-processing {
            background: linear-gradient(135deg, var(--processing) 0%, #FF9E33 100%);
        }
        .stat-card-error {
            background: linear-gradient(135deg, var(--error) 0%, #F86464 100%);
        }
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        .stat-value {
            font-size: 28px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .stat-unit {
            font-size: 14px;
            font-weight: 400;
            opacity: 0.9;
        }
        /* 操作按钮 */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background-color: var(--primary);
            color: #fff;
        }
        .btn-primary:hover {
            background-color: #0E4BDB;
        }
        .btn-default {
            background-color: var(--bg-light);
            color: var(--text-secondary);
        }
        .btn-default:hover {
            background-color: #e5e7eb;
        }
        .btn-group {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }
        /* 可视化画布 */
        .vis-canvas {
            width: 100%;
            height: 400px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background-color: var(--bg-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        .canvas-placeholder {
            text-align: center;
            color: var(--text-light);
        }
        .canvas-icon {
            font-size: 64px;
            margin-bottom: 16px;
            color: var(--border);
        }
        .canvas-tab {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            gap: 8px;
            background-color: #fff;
            border-radius: 4px;
            padding: 4px;
            box-shadow: var(--shadow);
        }
        .canvas-tab-item {
            padding: 4px 12px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 4px;
        }
        .canvas-tab-active {
            background-color: var(--primary);
            color: #fff;
        }
        /* 向量片段列表 */
        .vec-list {
            width: 100%;
            border-collapse: collapse;
        }
        .vec-list th, .vec-list td {
            padding: 16px 24px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }
        .vec-list th {
            background-color: var(--bg-light);
            color: var(--text-secondary);
            font-weight: 500;
        }
        .vec-list tr:hover {
            background-color: var(--active);
        }
        .chunk-num {
            display: inline-block;
            width: 24px;
            height: 24px;
            line-height: 24px;
            text-align: center;
            background-color: var(--primary);
            color: #fff;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .chunk-content {
            color: var(--text-main);
            line-height: 1.6;
            max-width: 700px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            position: relative;
        }
        .chunk-content:hover::after {
            content: attr(title);
            position: absolute;
            top: 120%;
            left: 0;
            background: var(--text-main);
            color: #fff;
            padding: 8px 12px;
            border-radius: var(--radius);
            white-space: pre-wrap;
            z-index: 99;
            max-width: 500px;
            box-shadow: var(--shadow);
        }
        /* 向量状态标签 */
        .vec-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        .status-pending {
            background-color: rgba(134,144,156,0.1);
            color: var(--pending);
        }
        .status-processing {
            background-color: rgba(255,125,0,0.1);
            color: var(--processing);
        }
        .status-success {
            background-color: rgba(0,180,42,0.1);
            color: var(--success);
        }
        .status-error {
            background-color: rgba(245,63,63,0.1);
            color: var(--error);
        }
        /* 加载动画 */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid currentColor;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* 空状态 */
        .empty-box {
            padding: 60px 20px;
            text-align: center;
            color: var(--text-light);
            font-size: 14px;
        }
        .empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
            color: var(--border);
        }
        /* 适配小屏 */
        @media (max-width: 1200px) {
            .chunk-content {
                max-width: 400px;
            }
        }
        @media (max-width: 992px) {
            .stat-card-group {
                grid-template-columns: repeat(2, 1fr);
            }
            .vec-list th, .vec-list td {
                padding: 12px 16px;
            }
            .chunk-content {
                max-width: 250px;
            }
        }
        @media (max-width: 576px) {
            .stat-card-group {
                grid-template-columns: 1fr;
            }
            .vis-canvas {
                height: 280px;
            }
            .vec-list th:nth-child(4), .vec-list td:nth-child(4) {
                display: none;
            }
            .btn-group {
                flex-wrap: wrap;
            }
        }
    </style>
    <!-- 字体图标 -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 预留ECharts引入（2D/3D可视化） -->
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 页面头部 -->
        <div class="page-header">
            <h1 class="page-title">
                <i class="fas fa-vector-square"></i> 向量表示与索引状态展示
                <small>RAG Embedding 可视化 & 索引管理</small>
            </h1>
            <div>
                <a href="javascript:;" class="back-btn"><i class="fas fa-arrow-left"></i> 返回文档切分</a>
                <a href="javascript:;" class="back-btn" style="margin-left:10px;"><i class="fas fa-arrow-left"></i> 返回文档管理</a>
            </div>
        </div>

        <!-- 向量统计卡片 -->
        <div class="stat-card-group">
            <div class="stat-card">
                <div class="stat-label">已向量化片段</div>
                <div class="stat-value" id="vecSuccessNum">12 <span class="stat-unit">/ 15 个</span></div>
            </div>
            <div class="stat-card stat-card-processing">
                <div class="stat-label">正在向量化</div>
                <div class="stat-value" id="vecProcessingNum">2 <span class="stat-unit">个</span></div>
            </div>
            <div class="stat-card stat-card-pending">
                <div class="stat-label">待向量化片段</div>
                <div class="stat-value" id="vecPendingNum">1 <span class="stat-unit">个</span></div>
            </div>
            <div class="stat-card stat-card-error">
                <div class="stat-label">向量化失败</div>
                <div class="stat-value" id="vecErrorNum">0 <span class="stat-unit">个</span></div>
            </div>
            <div class="stat-card">
                <div class="stat-label">向量维度</div>
                <div class="stat-value">768 <span class="stat-unit">d (BGE-base)</span></div>
            </div>
            <div class="stat-card">
                <div class="stat-label">向量索引状态</div>
                <div class="stat-value"><i class="fas fa-check-circle"></i> 已建立 <span class="stat-unit">FAISS索引</span></div>
            </div>
        </div>

        <!-- 核心操作与可视化画布 -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title"><i class="fas fa-chart-scatter"></i> 向量低维空间分布可视化</h3>
                <div class="btn-group">
                    <button class="btn btn-primary" id="genVecBtn"><i class="fas fa-magic"></i> 批量生成向量</button>
                    <button class="btn btn-default" id="refreshVecBtn"><i class="fas fa-sync-alt"></i> 刷新状态</button>
                    <button class="btn btn-default" id="rebuildIndexBtn"><i class="fas fa-database"></i> 重建向量索引</button>
                </div>
            </div>
            <div class="card-body">
                <!-- 2D/3D可视化画布 -->
                <div class="vis-canvas" id="vecCanvas">
                    <!-- 可视化占位 -->
                    <div class="canvas-placeholder" id="canvasPlaceholder">
                        <div class="canvas-icon"><i class="fas fa-project-diagram"></i></div>
                        <h4>向量低维分布可视化</h4>
                        <p style="margin-top:8px;">点击「批量生成向量」后，展示片段在2D/3D空间的聚类分布</p>
                        <p style="margin-top:4px; font-size:12px;">相同语义片段会在空间中聚集，颜色对应片段向量化状态</p>
                    </div>
                    <!-- 2D/3D切换标签 -->
                    <div class="canvas-tab">
                        <div class="canvas-tab-item canvas-tab-active" onclick="switchCanvas('2d')">2D分布</div>
                        <div class="canvas-tab-item" onclick="switchCanvas('3d')">3D分布</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 向量片段列表与索引状态 -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title"><i class="fas fa-list-ol"></i> 切分片段向量状态列表</h3>
                <span style="font-size:12px; color:var(--text-light);">共15个切分片段 | 向量模型：BGE-base-zh-v1.5 | 索引引擎：FAISS</span>
            </div>
            <div class="card-body">
                <table class="vec-list" id="vecListTable">
                    <thead>
                        <tr>
                            <th width="8%">片段编号</th>
                            <th width="45%">片段内容</th>
                            <th width="15%">向量状态</th>
                            <th width="12%">向量长度</th>
                            <th width="20%">操作</th>
                        </tr>
                    </thead>
                    <tbody id="vecListBody">
                        <!-- 模拟数据由JS渲染 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let chunkVecList = []; // 片段向量数据列表
        let currentCanvasType = '2d'; // 可视化画布类型：2d/3d
        let vecChart = null; // ECharts实例
        // 元素获取
        const genVecBtn = document.getElementById('genVecBtn');
        const refreshVecBtn = document.getElementById('refreshVecBtn');
        const rebuildIndexBtn = document.getElementById('rebuildIndexBtn');
        const vecCanvas = document.getElementById('vecCanvas');
        const canvasPlaceholder = document.getElementById('canvasPlaceholder');
        const vecSuccessNum = document.getElementById('vecSuccessNum');
        const vecProcessingNum = document.getElementById('vecProcessingNum');
        const vecPendingNum = document.getElementById('vecPendingNum');
        const vecErrorNum = document.getElementById('vecErrorNum');
        const vecListBody = document.getElementById('vecListBody');

        // 页面初始化：生成模拟切分片段数据
        window.onload = function() {
            generateMockChunkData();
            renderVecList();
            updateStatNum();
        };

        // 生成模拟切分片段数据（15个，模拟不同向量状态）
        function generateMockChunkData() {
            const mockContents = [
                "# 企业RAG技术白皮书",
                "检索增强生成（RAG）是将信息检索与大语言模型结合的生成式AI技术",
                "RAG核心解决大模型幻觉、知识过时两大核心问题",
                "RAG的核心流程分为四步：文档加载与预处理、文档切分与向量化、检索匹配、生成回答",
                "文档切分是RAG的关键环节，切分粒度直接影响检索精度和生成效果",
                "企业级RAG文档切分需遵循粒度适配、语义完整、重叠互补、动态调整四大原则",
                "按字符切分：实现简单、通用性强，适合无明显格式的纯文本",
                "按句子切分：语义完整性高，对分句符敏感，适合中文书面文档",
                "按段落切分：语义独立性最强，片段长度不均，适合排版规范的文档",
                "自定义规则切分：适配个性化业务，需要人工配置规则",
                "向量嵌入（Embedding）是将文本片段转为数值向量的过程",
                "常用的中文Embedding模型有BGE-base、text2vec、ernie-embedding等",
                "向量维度常见为768d、1024d，维度越高表示能力越强但存储成本越高",
                "向量索引引擎常用FAISS、Milvus、Pinecone，用于快速检索相似向量",
                "企业RAG落地需兼顾检索精度、生成速度、部署成本三大因素"
            ];
            // 构造向量状态：12成功/2处理中/1待处理/0失败
            const statusList = [
                'success','success','success','success','success',
                'success','success','success','processing','processing',
                'success','success','success','success','pending'
            ];
            chunkVecList = mockContents.map((content, index) => ({
                id: `c${index+1}`,
                num: index+1,
                content: content,
                vecStatus: statusList[index], // pending/processing/success/error
                vecDim: 768,
                vecLength: Math.floor(Math.random() * 1000) + 500, // 模拟向量长度
                createTime: new Date().toLocaleString()
            }));
        }

        // 渲染向量状态列表
        function renderVecList() {
            vecListBody.innerHTML = '';
            // 状态映射：图标+样式+文字
            const statusMap = {
                pending: { icon: 'fas fa-clock', class: 'status-pending', text: '待向量化' },
                processing: { icon: 'fas fa-spinner loading', class: 'status-processing', text: '正在向量化' },
                success: { icon: 'fas fa-check-circle', class: 'status-success', text: '已向量化·已索引' },
                error: { icon: 'fas fa-exclamation-circle', class: 'status-error', text: '向量化失败' }
            };
            // 渲染每个片段
            chunkVecList.forEach(chunk => {
                const status = statusMap[chunk.vecStatus];
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><span class="chunk-num">${chunk.num}</span></td>
                    <td class="chunk-content" title="${chunk.content}">${chunk.content}</td>
                    <td><span class="vec-status ${status.class}"><i class="${status.icon}"></i> ${status.text}</span></td>
                    <td>${chunk.vecLength}</td>
                    <td>
                        <button class="btn btn-default" style="padding:6px 12px; font-size:12px;" onclick="reGenVec('${chunk.id}')">
                            <i class="fas fa-magic"></i> 重新生成
                        </button>
                        ${chunk.vecStatus === 'success' ? 
                            '<button class="btn btn-primary" style="padding:6px 12px; font-size:12px; margin-left:8px;" onclick="viewVecDetail(\''+chunk.id+'\')">'+
                                '<i class="fas fa-eye"></i> 查看向量'+
                            '</button>' : ''}
                    </td>
                `;
                vecListBody.appendChild(tr);
            });
        }

        // 更新统计数字
        function updateStatNum() {
            const success = chunkVecList.filter(item => item.vecStatus === 'success').length;
            const processing = chunkVecList.filter(item => item.vecStatus === 'processing').length;
            const pending = chunkVecList.filter(item => item.vecStatus === 'pending').length;
            const error = chunkVecList.filter(item => item.vecStatus === 'error').length;
            const total = chunkVecList.length;
            vecSuccessNum.innerHTML = `${success} <span class="stat-unit">/ ${total} 个</span>`;
            vecProcessingNum.innerHTML = `${processing} <span class="stat-unit">个</span>`;
            vecPendingNum.innerHTML = `${pending} <span class="stat-unit">个</span>`;
            vecErrorNum.innerHTML = `${error} <span class="stat-unit">个</span>`;
        }

        // 批量生成向量（模拟异步流程）
        genVecBtn.addEventListener('click', function() {
            if (chunkVecList.some(item => item.vecStatus === 'processing')) {
                alert('已有片段正在向量化，请勿重复操作！');
                return;
            }
            // 将待处理/失败状态改为处理中
            chunkVecList = chunkVecList.map(item => {
                if (item.vecStatus === 'pending' || item.vecStatus === 'error') {
                    return { ...item, vecStatus: 'processing' };
                }
                return item;
            });
            renderVecList();
            updateStatNum();
            alert('开始批量生成向量，该过程耗时约3-5秒，请稍候...');
            // 模拟异步向量化（逐片段完成，最后一个模拟失败）
            let index = 0;
            const timer = setInterval(() => {
                if (index < chunkVecList.length) {
                    if (chunkVecList[index].vecStatus === 'processing') {
                        // 模拟1个失败案例
                        chunkVecList[index].vecStatus = index === chunkVecList.length - 2 ? 'error' : 'success';
                    }
                    index++;
                    renderVecList();
                    updateStatNum();
                } else {
                    clearInterval(timer);
                    // 生成可视化图表
                    generateVecCanvas();
                    // 提示完成
                    alert('批量向量化完成！部分片段失败请点击「重新生成」，已自动建立FAISS向量索引');
                }
            }, 300);
        });

        // 生成向量低维分布可视化（ECharts 2D/3D）
        function generateVecCanvas() {
            // 隐藏占位符
            canvasPlaceholder.style.display = 'none';
            // 初始化ECharts
            vecChart = echarts.init(vecCanvas);
            // 准备数据：按状态分颜色
            const colorMap = {
                success: '#00B42A',
                processing: '#FF7D00',
                pending: '#86909C',
                error: '#F53F3F'
            };
            const seriesData = chunkVecList.map(item => ({
                name: `片段${item.num}`,
                value: [
                    Math.floor(Math.random() * 100), // 模拟2D/3D坐标
                    Math.floor(Math.random() * 100),
                    currentCanvasType === '3d' ? Math.floor(Math.random() * 100) : 0
                ],
                itemStyle: { color: colorMap[item.vecStatus] },
                data: item // 携带片段数据
            }));
            // 配置项
            const option = {
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        const chunk = params.data.data;
                        return `
                            <div style="text-align:left;">
                                <p><b>片段${chunk.num}</b></p>
                                <p>状态：${chunk.vecStatus === 'success' ? '已向量化·已索引' : 
                                    chunk.vecStatus === 'processing' ? '正在向量化' : 
                                    chunk.vecStatus === 'pending' ? '待向量化' : '向量化失败'}</p>
                                <p>维度：${chunk.vecDim}d</p>
                                <p>内容：${chunk.content}</p>
                            </div>
                        `;
                    }
                },
                legend: {
                    data: ['已向量化', '正在向量化', '待向量化', '向量化失败'],
                    top: 10,
                    left: 'center'
                },
                xAxis: currentCanvasType === '2d' ? { type: 'value', name: '维度X' } : null,
                yAxis: currentCanvasType === '2d' ? { type: 'value', name: '维度Y' } : null,
                zAxis: currentCanvasType === '3d' ? { type: 'value', name: '维度Z' } : null,
                grid: { top: 60, bottom: 40 },
                series: [
                    {
                        name: '已向量化',
                        type: currentCanvasType === '2d' ? 'scatter' : 'scatter3D',
                        data: seriesData.filter(item => item.data.vecStatus === 'success'),
                        symbolSize: 12
                    },
                    {
                        name: '正在向量化',
                        type: currentCanvasType === '2d' ? 'scatter' : 'scatter3D',
                        data: seriesData.filter(item => item.data.vecStatus === 'processing'),
                        symbolSize: 12
                    },
                    {
                        name: '待向量化',
                        type: currentCanvasType === '2d' ? 'scatter' : 'scatter3D',
                        data: seriesData.filter(item => item.data.vecStatus === 'pending'),
                        symbolSize: 12
                    },
                    {
                        name: '向量化失败',
                        type: currentCanvasType === '2d' ? 'scatter' : 'scatter3D',
                        data: seriesData.filter(item => item.data.vecStatus === 'error'),
                        symbolSize: 12
                    }
                ]
            };
            // 渲染图表
            vecChart.setOption(option);
            // 自适应窗口
            window.addEventListener('resize', () => vecChart.resize());
        }

        // 切换2D/3D画布
        function switchCanvas(type) {
            if (currentCanvasType === type || !vecChart) return;
            currentCanvasType = type;
            // 更新标签样式
            document.querySelectorAll('.canvas-tab-item').forEach(item => {
                item.classList.remove('canvas-tab-active');
                if (item.innerText === `${type.toUpperCase()}分布`) {
                    item.classList.add('canvas-tab-active');
                }
            });
            // 重新生成图表
            generateVecCanvas();
        }

        // 刷新向量状态
        refreshVecBtn.addEventListener('click', function() {
            // 模拟状态刷新（处理中→成功/失败）
            chunkVecList = chunkVecList.map(item => {
                if (item.vecStatus === 'processing') {
                    return { ...item, vecStatus: Math.random() > 0.1 ? 'success' : 'error' };
                }
                return item;
            });
            renderVecList();
            updateStatNum();
            // 刷新可视化图表
            if (vecChart) generateVecCanvas();
            alert('向量状态刷新完成！');
        });

        // 重建向量索引
        rebuildIndexBtn.addEventListener('click', function() {
            if (chunkVecList.filter(item => item.vecStatus === 'success').length === 0) {
                alert('暂无已向量化的片段，无法重建索引！');
                return;
            }
            alert('开始重建FAISS向量索引，该过程耗时约2秒...');
            setTimeout(() => {
                alert('向量索引重建成功！已更新所有已向量化片段的索引关系');
            }, 2000);
        });

        // 单个片段重新生成向量
        function reGenVec(id) {
            const chunk = chunkVecList.find(item => item.id === id);
            if (!chunk) return;
            // 改为处理中
            chunk.vecStatus = 'processing';
            renderVecList();
            updateStatNum();
            alert(`开始为片段${chunk.num}重新生成向量...`);
            // 模拟异步处理
            setTimeout(() => {
                chunk.vecStatus = 'success';
                renderVecList();
                updateStatNum();
                if (vecChart) generateVecCanvas();
                alert(`片段${chunk.num}向量重新生成成功！已更新索引`);
            }, 1500);
        }

        // 查看向量详情（模拟）
        function viewVecDetail(id) {
            const chunk = chunkVecList.find(item => item.id === id);
            if (!chunk) return;
            // 模拟向量数值（前10位）
            const mockVec = Array(10).fill(0).map(() => (Math.random() * 2 - 1).toFixed(4));
            alert(`
片段${chunk.num}向量详情
┌───────────────────────────────────
│ 向量状态：已向量化·已索引
│ 向量维度：${chunk.vecDim}d
│ 向量长度：${chunk.vecLength}
│ 生成模型：BGE-base-zh-v1.5
│ 索引引擎：FAISS
│ 向量数值（前10位）：${mockVec.join(', ')}...
└───────────────────────────────────
            `);
        }
    </script>
</body>
</html>